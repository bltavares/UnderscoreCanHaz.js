(function(a){var b=function(){var b=this;b.templates={};b.caching=[];b.defaults={raw:false,cache:true};b.get_cached=function(a){return _.detect(b.caching,function(b){return b.id==a.id&&_.isEqual(b.data,a.data)})};b.addTemplate=function(c,d){if(c in b.templates||c in b)throw"Duplicate template: "+c;b.templates[c]=_.template(d);b[c]=function(d,e){e=_.extend(b.defaults,e||{});var f={id:c,data:d||{}},g=e.cache?b.get_cached(f):false;if(!g){g=_.extend(f,{template:b.templates[c](f.data)});if(e.cache){b.caching.push(g)}}return e.raw?g.template:a(g.template)}};b.grabAllTemplates=function(){a('script[type="text/html"]').each(function(c,d){var e=a(this),f=a.trim(this.innerHTML);b.addTemplate(e.attr("id"),f);e.remove()})};return b};window._CanHaz=b;window._chz=new b;a(function(){_chz.grabAllTemplates()})})(jQuery)